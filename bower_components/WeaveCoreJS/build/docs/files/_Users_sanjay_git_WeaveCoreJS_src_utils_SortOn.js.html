<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>/Users/sanjay/git/WeaveCoreJS/src/utils/SortOn.js - weavecore</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">

                <h1><img src="../assets/css/logo.png" title="weavecore"></h1>

        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 1.0.0</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">

                <li><a href="../classes/CallbackCollection.html">CallbackCollection</a></li>

                <li><a href="../classes/CallbackEntry.html">CallbackEntry</a></li>

                <li><a href="../classes/ChildListCallbackInterface.html">ChildListCallbackInterface</a></li>

                <li><a href="../classes/DynamicState.html">DynamicState</a></li>

                <li><a href="../classes/Event.html">Event</a></li>

                <li><a href="../classes/EventDispatcher.html">EventDispatcher</a></li>

                <li><a href="../classes/GroupedCallbackEntry.html">GroupedCallbackEntry</a></li>

                <li><a href="../classes/ILinkableObject.html">ILinkableObject</a></li>

                <li><a href="../classes/LinkableDynamicObject.html">LinkableDynamicObject</a></li>

                <li><a href="../classes/LinkableHashMap.html">LinkableHashMap</a></li>

                <li><a href="../classes/LinkablePromise.html">LinkablePromise</a></li>

                <li><a href="../classes/LinkableWatcher.html">LinkableWatcher</a></li>

                <li><a href="../classes/SessionManager.html">SessionManager</a></li>

                <li><a href="../classes/Ticker.html">Ticker</a></li>

            </ul>

            <ul id="api-modules" class="apis modules">

                <li><a href="../modules/CreateJS.html">CreateJS</a></li>

                <li><a href="../modules/WeaveAPI.html">WeaveAPI</a></li>

                <li><a href="../modules/weavecore.html">weavecore</a></li>

            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: /Users/sanjay/git/WeaveCoreJS/src/utils/SortOn.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/**
 * In the sorting methods, this constant specifies case-insensitive sorting. You can use this constant for the options parameter in the sort() or sortOn() method.
 * &lt;p&gt;he value of this constant is 1.&lt;/p&gt;
 */
Array.CASEINSENSITIVE = 1;

/**
 * In the sorting methods, this constant specifies descending sort order. You can use this constant for the options parameter in the sort() or sortOn() method.
 * &lt;p&gt;The value of this constant is 2.&lt;/p&gt;
 */
Array.DESCENDING = 2;

/**
 * In the sorting methods, this constant specifies numeric (instead of character-string) sorting. Including it in the options parameter causes the sort() and sortOn() methods to sort numbers as numeric values, not as strings of numeric characters.
 * &lt;p&gt;Without the NUMERIC constant, sorting treats each array element as a character string and produces the results in Unicode order.&lt;/p&gt;
 * &lt;p&gt;For example, given the Array of values [2005, 7, 35], if the NUMERIC constant is not included in the options parameter, the sorted Array is [2005, 35, 7], but if the NUMERIC constant is included, the sorted Array is [7, 35, 2005].&lt;/p&gt;
 * &lt;p&gt;The value of this constant is 16.&lt;/p&gt;
 */
Array.NUMERIC = 16;

/**
 * Specifies that a sort returns an indexed array as a result of calling the sort() or sortOn() method.
 * &lt;p&gt;You can use this constant for the options parameter in the sort() or sortOn() method. This provides preview or copy functionality by returning an array that represents the results of the sort and leaves the original array unmodified.&lt;/p&gt;
 * &lt;p&gt;The value of this constant is 8.&lt;/p&gt;
 */
Array.RETURNINDEXEDARRAY = 8;

/**
 * In the sorting methods, this constant specifies the unique sorting requirement.
 * &lt;p&gt;You can use this constant for the options parameter in the sort() or sortOn() method. The unique sorting option aborts the sort if any two elements or fields being sorted have identical values.&lt;/p&gt;
 * &lt;p&gt;The value of this constant is 4.&lt;/p&gt;
 */
Array.UNIQUESORT = 4;

/**
 * Sorts the elements in an array according to one or more fields in the array.
 * The array should have the following characteristics:
 * &lt;ul&gt;
 * &lt;li&gt;The array is an indexed array, not an associative array.&lt;/li&gt;
 * &lt;li&gt;Each element of the array holds an object with one or more properties.&lt;/li&gt;
 * &lt;li&gt;All of the objects have at least one property in common, the values of which can be used to sort the array. Such a property is called a field.&lt;/li&gt;
 * &lt;/ul&gt;
 * &lt;p&gt;&lt;b&gt;Example : &lt;/b&gt;&lt;/p&gt;
 * {@code
 * echo = function( a )
 * {
 *     var l = a.length ;
 *     for (var i = 0; i &lt; l; i++)
 *     {
 *         trace( &quot;&gt;&gt; &quot; + a[i].name + &quot; :: &quot; + a[i].num ) ;
 *     }
 * }
 *
 * trace (&quot;---- Array&quot;) ;
 * var a =
 * [
 *     { name:&quot;test 0&quot; , num:6 } ,
 *     { name:&quot;Test 1&quot; , num:8 } ,
 *     { name:&quot;test 2&quot; , num:4 } ,
 *     { name:&quot;test 3&quot; , num:10 }
 * ] ;
 *
 * echo(a) ;
 *
 * trace (&quot;---- sort num Array.NUMERIC | Array.DESCENDING&quot;) ;
 *
 * var r = core.arrays.sortOn( a , &quot;num&quot;, Array.NUMERIC | Array.DESCENDING) ;
 *
 * echo(a) ;
 *
 * trace (&quot;---- sort name&quot;) ;
 *
 * core.arrays.sortOn( a , &quot;name&quot;) ;
 *
 * echo(a) ;
 *
 * trace (&quot;---- sort name Array.CASEINSENSITIVE&quot;) ;
 *
 * core.arrays.sortOn( a , &quot;name&quot;, Array.CASEINSENSITIVE) ;
 *
 * echo(a) ;
 *
 * trace (&quot;---- sort name Array.RETURNINDEXEDARRAY&quot;) ;
 *
 * //var result = core.arrays.sortOn( a , &quot;name&quot;, Array.CASESEINSENTIVE | Array.RETURNINDEXEDARRAY) ;
 * //var result = core.arrays.sortOn( a , &quot;name&quot;, Array.RETURNINDEXEDARRAY) ;
 * //trace (result) :
 *
 * var result = core.arrays.sortOn( a , &quot;num&quot;, Array.NUMERIC | Array.DESCENDING | Array.RETURNINDEXEDARRAY ) ;
 * trace (result) ;
 *
 * var result = core.arrays.sortOn( a , &quot;num&quot;, Array.NUMERIC | Array.RETURNINDEXEDARRAY ) ;
 * trace (result) ;
 *
 * var result = core.arrays.sortOn( a , &quot;name&quot;, Array.NUMERIC | Array.RETURNINDEXEDARRAY ) ;
 * trace (result) ;
 *
 * trace (&quot;---- sort name Array.UNIQUESORT&quot;) ;
 *
 * a.push({ name:&quot;test 1&quot; , num:60 } ) ;
 *
 * core.arrays.sortOn( a , &quot;name&quot;, Array.UNIQUESORT ) ;
 *
 * echo(a) ;
 * }
 */
Array.prototype.sortOn = function (propName, options) {
    propName = propName[0];
    options = options[0];

    var sortFunction = function (o1, o2) {
        var v1 = (o1[propName] != undefined) ? o1[propName].valueOf() : &quot;&quot;;
        var v2 = (o2[propName] != undefined) ? o2[propName].valueOf() : &quot;&quot;;

        function noCase() {
            if (typeof (v1) == &quot;string&quot; || v1 instanceof String) {
                v1 = v1.toLowerCase();
            }
            if (typeof (v2) == &quot;string&quot; || v2 instanceof String) {
                v2 = v2.toLowerCase();
            }
        }

        function numeric() {
            v1 = Number(v1);
            v2 = Number(v2);
            v1 = isNaN(v1) ? 0 : v1;
            v2 = isNaN(v2) ? 0 : v2;
        }

        function reverse() {
            var tmp = v1;
            v1 = v2;
            v2 = tmp;
        }

        switch (options) {
        case Array.CASEINSENSITIVE:
        case Array.CASEINSENSITIVE | Array.RETURNINDEXEDARRAY:
            {
                noCase();
                break;
            }
        case Array.NUMERIC:
        case Array.NUMERIC | Array.RETURNINDEXEDARRAY:
            {
                numeric();
                break;
            }
        case Array.DESCENDING:
        case Array.DESCENDING | Array.RETURNINDEXEDARRAY:
            {
                reverse();
                break;
            }
        case Array.CASEINSENSITIVE | Array.DESCENDING:
        case Array.CASEINSENSITIVE | Array.DESCENDING | Array.RETURNINDEXEDARRAY:
            {
                noCase();
                reverse();
                break;
            }
        case Array.NUMERIC | Array.DESCENDING:
        case Array.NUMERIC | Array.DESCENDING | Array.RETURNINDEXEDARRAY:
            {
                numeric();
                reverse();
                break;
            }
        case Array.UNIQUESORT:
            {
                if (v1 == v2) return;
                break
            }
        }

        if (v1 &lt; v2) {
            return -1;
        } else if (v1 &gt; v2) {
            return 1;
        } else {
            return 0;
        }
    }

    switch (options) {
    case Array.RETURNINDEXEDARRAY:
    case Array.RETURNINDEXEDARRAY | Array.NUMERIC:
    case Array.RETURNINDEXEDARRAY | Array.CASEINSENSITIVE:
    case Array.RETURNINDEXEDARRAY | Array.NUMERIC | Array.DESCENDING:
    case Array.RETURNINDEXEDARRAY | Array.CASEINSENSITIVE | Array.DESCENDING:
        {
            var tmp = [].concat(this);
            tmp.sort(sortFunction);
            var result = [];
            var l = this.length;
            for (var i = 0; i &lt; l; i++) {
                var index = tmp.indexOf(this[i]);
                result.push(index);
            }
            return result;
        }
    default:
        {
            return this.sort(sortFunction);
        }
    }
}
    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
